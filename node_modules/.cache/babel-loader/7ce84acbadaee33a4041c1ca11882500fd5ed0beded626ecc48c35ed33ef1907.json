{"ast":null,"code":"var _jsxFileName = \"/Users/alexandertraykov/Documents/Documents/synapse-sys/src/components/NodeInput.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useCallback, useRef, useEffect, lazy, Suspense } from 'react';\nimport { Handle, Position\n// Remove unused imports:\n// ReactFlow,\n// useNodesState,\n// useEdgesState,\n// getCenter\n} from 'reactflow';\nimport 'reactflow/dist/style.css';\nimport styled from 'styled-components';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useOverlay } from '../context/OverlayContext';\nimport { defaultIcon } from '../context/OverlayContext';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst jitterKeyframes = `\n  @keyframes jitter {\n    0% { transform: translate(0, 0) rotate(0deg); }\n    25% { transform: translate(1px, 1px) rotate(0.5deg); }\n    50% { transform: translate(-1px, -1px) rotate(-0.5deg); }\n    75% { transform: translate(-1px, 1px) rotate(0.5deg); }\n    100% { transform: translate(1px, -1px) rotate(-0.5deg); }\n  }\n`;\nconst edgeAnimationKeyframes = `\n  @keyframes flowAnimation {\n    from {\n      stroke-dashoffset: 20;\n    }\n    to {\n      stroke-dashoffset: 0;\n    }\n  }\n`;\nconst ShadowLayer = styled(motion.div).attrs(props => ({\n  style: {\n    filter: props.isDragging ? 'drop-shadow(32px 32px 0px #000000) drop-shadow(48px 48px 0px #05FD11)' : 'drop-shadow(0px 0px 0px #000000) drop-shadow(0px 0px 0px #05FD11)'\n  }\n}))`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  z-index: -1;\n`;\n_c = ShadowLayer;\nconst NodeContainer = styled(motion.div)`\n  ${jitterKeyframes}\n  background: ${props => props.theme.terminal.bg};\n  border: 2px solid ${props => props.theme.terminal.border};\n  padding: 12px;\n  min-width: 300px;\n  position: relative;\n  cursor: ${props => props.isDragging ? 'grabbing' : 'grab'};\n  z-index: 1000;\n\n  &:hover {\n    .handle {\n      opacity: 0.5;\n    }\n  }\n`;\n_c2 = NodeContainer;\nconst EditModeContent = styled(motion.div)`\n  width: 100%;\n`;\n_c3 = EditModeContent;\nconst ViewModeActions = styled(motion.div)`\n  position: absolute;\n  top: 12px;\n  right: 12px;\n  display: flex;\n  gap: 12px;\n  opacity: 0;\n  transition: opacity 0.2s;\n\n  i {\n    font-size: 16px;\n    color: #0EF928;\n    cursor: pointer;\n    opacity: ${props => props.isDragging ? 0.5 : 1};\n    transition: opacity 0.2s;\n    \n    &.hn-times {\n      color: #ff0000;\n    }\n\n    &.hn-pencil {\n      margin-right: 4px;\n    }\n  }\n`;\n_c4 = ViewModeActions;\nconst handleJitterKeyframes = `\n  @keyframes handleJitter {\n    0% { transform: translate(0, 0); }\n    25% { transform: translate(0.5px, 0.5px); }\n    50% { transform: translate(-0.5px, -0.5px); }\n    75% { transform: translate(-0.5px, 0.5px); }\n    100% { transform: translate(0.5px, -0.5px); }\n  }\n`;\n\n// First, let's define our constants for the handle positions\nconst HANDLE_PADDING = 32; // The default padding of the handle from the node\nconst HANDLE_SIZE = 8; // The width/height of the handle dot\n\nconst CustomHandle = styled(Handle)`\n  ${handleJitterKeyframes}\n  ${edgeAnimationKeyframes}\n  width: ${HANDLE_SIZE}px;\n  height: ${HANDLE_SIZE}px;\n  background: ${props => props.theme.terminal.text};\n  border: 2px solid ${props => props.theme.terminal.border};\n  opacity: 0;\n  transition: all 0.1s cubic-bezier(0.2, 0.8, 0.2, 1);\n  position: absolute;\n\n  &.react-flow__handle {\n    z-index: 1;\n  }\n\n  &.top {\n    top: -${HANDLE_SIZE / 2}px;\n    left: 50%;\n    transform: translateX(-50%);\n    \n    &.connecting {\n      background: #000;\n      border: 2px solid #0EF928;\n      opacity: 1;\n      z-index: 1000;\n    }\n  }\n  \n  &.right {\n    right: -${HANDLE_SIZE / 2}px;\n    top: 50%;\n    transform: translateY(-50%);\n    \n    &.connecting {\n      background: #000;\n      border: 2px solid #0EF928;\n      opacity: 1;\n      z-index: 1000;\n    }\n  }\n  \n  &.bottom {\n    bottom: -${HANDLE_SIZE / 2}px;\n    left: 50%;\n    transform: translateX(-50%);\n    \n    &.connecting {\n      background: #000;\n      border: 2px solid #0EF928;\n      opacity: 1;\n      z-index: 1000;\n    }\n  }\n  \n  &.left {\n    left: -${HANDLE_SIZE / 2}px;\n    top: 50%;\n    transform: translateY(-50%);\n    \n    &.connecting {\n      background: #000;\n      border: 2px solid #0EF928;\n      opacity: 1;\n      z-index: 1000;\n    }\n  }\n\n  &:hover {\n    background: #0EF928;\n    opacity: 1 !important;\n  }\n`;\n_c5 = CustomHandle;\nconst InputWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n`;\n_c6 = InputWrapper;\nconst HeaderRow = styled.div`\n  display: flex;\n  align-items: center;\n  position: relative;\n  padding-left: 32px;  // Space for icon\n`;\n_c7 = HeaderRow;\nconst Input = styled.input`\n  background: none;\n  border: none;\n  border-bottom: 2px solid ${props => props.theme.terminal.text};\n  color: ${props => props.theme.terminal.text};\n  font-family: 'VT323', monospace;\n  font-size: 20px;\n  width: 100%;\n  padding: 4px 4px 6px 4px;\n  \n  &:focus {\n    outline: none;\n    border-bottom-color: #0EF928;\n  }\n\n  &::placeholder {\n    color: ${props => props.theme.terminal.text}80;\n  }\n`;\n_c8 = Input;\nconst ParagraphInput = styled(Input)`\n  font-size: 16px;  // Smaller than header\n  margin-top: 8px;\n  padding-left: 0;  // Remove left padding since it's full width\n  width: 100%;\n`;\n_c9 = ParagraphInput;\nconst ActionBar = styled.div`\n  display: flex;\n  align-items: center;\n  margin-top: 8px;\n`;\n_c10 = ActionBar;\nconst ActionGroup = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  width: 100%;\n`;\n_c11 = ActionGroup;\nconst ActionButton = styled.button`\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 4px;\n  opacity: ${props => props.$active ? '1' : '0.7'};\n  transition: all 0.2s;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 24px;\n\n  &:hover {\n    opacity: 1;\n    transform: scale(1.1);\n  }\n\n  i {\n    font-size: 20px;\n    color: ${props => props.theme.terminal.text};\n  }\n`;\n_c12 = ActionButton;\nconst Tooltip = styled.div`\n  position: absolute;\n  bottom: -24px;\n  left: 50%;\n  transform: translateX(-50%);\n  background: #000000;\n  border: 2px solid #0EF928;\n  padding: 4px 8px;\n  font-size: 12px;\n  color: #0EF928;\n  white-space: nowrap;\n  pointer-events: none;\n  opacity: 0;\n  transition: opacity 0.2s;\n  font-family: 'VT323', monospace;\n  z-index: 1001;\n\n  ${ActionButton}:hover & {\n    opacity: 1;\n  }\n`;\n_c13 = Tooltip;\nconst PreviewContent = styled.div`\n  font-size: 16px;\n  color: ${props => props.theme.terminal.text};\n  line-height: 1.5;\n  padding: 12px 0;\n  white-space: pre-wrap;\n`;\n_c14 = PreviewContent;\nconst PreviewPanel = styled(motion.div)`\n  position: fixed;\n  bottom: 0;\n  right: 0;\n  width: 400px;\n  max-height: 70vh;\n  background: ${props => props.theme.terminal.bg};\n  border-top: 2px solid ${props => props.theme.terminal.border};\n  border-left: 2px solid ${props => props.theme.terminal.border};\n  padding: 24px;\n  z-index: 1000;\n  overflow-y: auto;\n  box-shadow: -8px -8px 0 -2px #000, -8px -8px 0 0 #05FD11;\n`;\n_c15 = PreviewPanel;\nconst ViewContent = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n`;\n_c16 = ViewContent;\nconst ViewHeader = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n`;\n_c17 = ViewHeader;\nconst ViewIconWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n`;\n_c18 = ViewIconWrapper;\nconst ViewHeading = styled.h3`\n  margin: 0;\n  font-size: 20px;\n  font-weight: normal;\n  color: ${props => props.theme.terminal.text};\n`;\n_c19 = ViewHeading;\nconst ViewParagraph = styled.p`\n  margin: 0;\n  padding-left: 40px;\n  color: ${props => props.theme.terminal.text};\n  opacity: 0.5;\n`;\n_c20 = ViewParagraph;\nconst SlidePanel = styled(motion.div)`\n  position: fixed;\n  bottom: 0;\n  right: 0;\n  width: 400px;\n  max-height: 70vh;\n  background: ${props => props.theme.terminal.bg};\n  border-top: 2px solid ${props => props.theme.terminal.border};\n  border-left: 2px solid ${props => props.theme.terminal.border};\n  padding: 24px;\n  z-index: 1000;\n  overflow-y: auto;\n  box-shadow: -8px -8px 0 -2px #000, -8px -8px 0 0 #05FD11;\n`;\nconst OverlayHeading = styled.h2`\n  font-size: 24px;\n  color: ${props => props.theme.terminal.text};\n  margin-bottom: 16px;\n`;\nconst OverlayParagraph = styled.p`\n  font-size: 16px;\n  color: ${props => props.theme.terminal.text}80;\n  line-height: 1.5;\n  white-space: pre-wrap;\n`;\nconst OverlayActions = styled.div`\n  position: absolute;\n  top: 24px;\n  right: 24px;\n  display: flex;\n  gap: 16px;\n\n  i {\n    font-size: 20px;\n    color: ${props => props.theme.terminal.text};\n    cursor: pointer;\n    opacity: 0.7;\n    transition: opacity 0.2s;\n\n    &:hover {\n      opacity: 1;\n    }\n  }\n`;\nconst EditIconWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  position: absolute;\n  left: 0;\n`;\n\n// Custom Node Component\n_c21 = EditIconWrapper;\nconst CustomNodeComponent = /*#__PURE__*/_s(/*#__PURE__*/React.memo(_c22 = _s(({\n  data\n}) => {\n  _s();\n  const [isEditing, setIsEditing] = useState(true);\n  const [inputValue, setInputValue] = useState(data.content || '');\n  const [isDragging, setIsDragging] = useState(false);\n  const [hoveredConnector, setHoveredConnector] = useState(null);\n  const [inputType, setInputType] = useState('text');\n  const nodeRef = useRef(null);\n  const isDraggingRef = useRef(false);\n  const [hoveredArea, setHoveredArea] = useState(null);\n  const [isHovering, setIsHovering] = useState(false);\n  const [pastedContent, setPastedContent] = useState(null);\n  const [showPreview, setShowPreview] = useState(false);\n  const [paragraphs, setParagraphs] = useState([]);\n  const {\n    showOverlay\n  } = useOverlay();\n  const [isConnecting, setIsConnecting] = useState(false);\n  const [connectingHandle, setConnectingHandle] = useState(null);\n  const connectingRef = useRef(false);\n  const handleRefs = useRef({}); // Store refs for each handle\n\n  // Update hover detection with larger area\n  const handleMouseMove = useCallback(e => {\n    if (isEditing) return;\n    setIsHovering(true); // Show all dots when hovering over node\n  }, [isEditing]);\n\n  // Update click outside handler\n  useEffect(() => {\n    const handleClickOutside = e => {\n      // Don't handle click outside if we're dragging\n      if (isDragging) return;\n      if (nodeRef.current && !nodeRef.current.contains(e.target)) {\n        if (inputValue.trim()) {\n          setIsEditing(false); // Save on click outside if there's content\n        } else {\n          var _data$onRemove;\n          (_data$onRemove = data.onRemove) === null || _data$onRemove === void 0 ? void 0 : _data$onRemove.call(data); // Remove if empty\n        }\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, [inputValue, data.onRemove, isDragging]);\n  const handleInputChange = e => {\n    var _data$onChange;\n    setInputValue(e.target.value);\n    (_data$onChange = data.onChange) === null || _data$onChange === void 0 ? void 0 : _data$onChange.call(data, e.target.value);\n  };\n  const handleKeyDown = e => {\n    if (isDragging) return;\n    if (e.key === 'Enter') {\n      if (e.shiftKey) {\n        // Add new paragraph\n        e.preventDefault();\n        setParagraphs([...paragraphs, '']);\n      } else if (inputValue.trim()) {\n        e.preventDefault();\n        setIsEditing(false);\n      }\n    }\n    if (e.key === 'Escape') {\n      if (inputValue.trim()) {\n        setIsEditing(false);\n      }\n    }\n  };\n  const handleTypeChange = type => {\n    setInputType(type);\n  };\n  const handleInputBlur = e => {\n    // Don't handle blur if we're dragging\n    if (isDragging) return;\n\n    // Check if the new focused element is within our node\n    setTimeout(() => {\n      var _nodeRef$current;\n      const newFocusedElement = document.activeElement;\n      const isWithinNode = (_nodeRef$current = nodeRef.current) === null || _nodeRef$current === void 0 ? void 0 : _nodeRef$current.contains(newFocusedElement);\n      if (!isWithinNode && inputValue.trim()) {\n        setIsEditing(false);\n      }\n    }, 0);\n  };\n\n  // When local editing state changes, update parent\n  useEffect(() => {\n    var _data$setIsEditing;\n    (_data$setIsEditing = data.setIsEditing) === null || _data$setIsEditing === void 0 ? void 0 : _data$setIsEditing.call(data, isEditing);\n  }, [isEditing, data.setIsEditing]);\n\n  // Update the drag state effect to use the ref\n  useEffect(() => {\n    isDraggingRef.current = !!data.isDragging;\n    setIsDragging(!!data.isDragging);\n  }, [data.isDragging]);\n  const handleAreaHover = area => {\n    setHoveredArea(area);\n    setIsHovering(true);\n  };\n  const handleAreaLeave = () => {\n    setHoveredArea(null);\n    setIsHovering(false);\n  };\n  const handlePaste = e => {\n    e.preventDefault();\n\n    // Get clipboard content as HTML\n    const clipboardData = e.clipboardData;\n    const html = clipboardData.getData('text/html');\n    const text = clipboardData.getData('text');\n    if (html) {\n      // Parse the HTML content\n      const parser = new DOMParser();\n      const doc = parser.parseFromString(html, 'text/html');\n\n      // Look for headings\n      const heading = doc.querySelector('h1, h2, h3, h4, h5, h6');\n      const title = heading ? heading.textContent : '';\n\n      // Get remaining content\n      const content = text.replace(title, '').trim();\n\n      // Update node with structured content\n      setPastedContent({\n        title,\n        content,\n        originalHtml: html\n      });\n\n      // Set the title as the input value\n      setInputValue(title);\n\n      // Show preview panel with content\n      setShowPreview(true);\n    } else {\n      // Just plain text, use as is\n      setInputValue(text);\n    }\n  };\n\n  // Add paragraph change handler\n  const handleParagraphChange = (index, value) => {\n    const newParagraphs = [...paragraphs];\n    newParagraphs[index] = value;\n    setParagraphs(newParagraphs);\n  };\n  const handleShowOverlay = () => {\n    showOverlay({\n      title: inputValue,\n      paragraphs,\n      onEdit: () => setIsEditing(true)\n    });\n  };\n  const handleMouseDown = (event, position) => {\n    event.stopPropagation();\n    setIsConnecting(true);\n    setConnectingHandle(position);\n    connectingRef.current = true;\n\n    // Log handle position - make sure handleRefs is properly initialized\n    if (handleRefs.current && handleRefs.current[position]) {\n      const handleElement = handleRefs.current[position];\n      const rect = handleElement.getBoundingClientRect();\n      const nodeRect = nodeRef.current.getBoundingClientRect();\n      console.log('Handle DOM position:', {\n        position,\n        handleX: rect.left + rect.width / 2,\n        handleY: rect.top + rect.height / 2,\n        nodeEdgeX: position === 'left' ? nodeRect.left : position === 'right' ? nodeRect.right : rect.left + rect.width / 2,\n        nodeEdgeY: position === 'top' ? nodeRect.top : position === 'bottom' ? nodeRect.bottom : rect.top + rect.height / 2\n      });\n    }\n  };\n  const handleMouseUp = event => {\n    if (connectingRef.current) {\n      setIsConnecting(false);\n      setConnectingHandle(null);\n      connectingRef.current = false;\n    }\n  };\n  useEffect(() => {\n    document.addEventListener('mouseup', handleMouseUp);\n    return () => document.removeEventListener('mouseup', handleMouseUp);\n  }, []);\n\n  // Add this function to calculate connection point\n  const getConnectionPoint = useCallback(handle => {\n    if (!isConnecting || connectingHandle !== handle) return null;\n\n    // Return coordinates based on handle position\n    switch (handle) {\n      case 'top':\n        return {\n          x: '50%',\n          y: 0\n        };\n      // At the node's top border\n      case 'right':\n        return {\n          x: '100%',\n          y: '50%'\n        };\n      // At the node's right border\n      case 'bottom':\n        return {\n          x: '50%',\n          y: '100%'\n        };\n      // At the node's bottom border\n      case 'left':\n        return {\n          x: 0,\n          y: '50%'\n        };\n      // At the node's left border\n      default:\n        return null;\n    }\n  }, [isConnecting, connectingHandle]);\n\n  // Memoize expensive calculations or components\n  const handles = React.useMemo(() => {\n    if (isEditing) return null;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(CustomHandle, {\n        type: \"target\",\n        position: Position.Top,\n        className: `top ${isConnecting && connectingHandle === 'top' ? 'connecting' : ''}`,\n        style: {\n          opacity: isHovering && !isDragging || isConnecting && connectingHandle === 'top' ? 1 : 0\n        },\n        isConnectable: !isEditing,\n        id: `${data.id}-top`,\n        ref: el => handleRefs.current['top'] = el,\n        onMouseDown: e => handleMouseDown(e, 'top'),\n        onConnect: connection => {\n          const handleElement = handleRefs.current['top'];\n          if (handleElement && isConnecting) {\n            const rect = handleElement.getBoundingClientRect();\n            connection.sourceX = rect.left + rect.width / 2;\n            connection.sourceY = rect.top;\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 625,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CustomHandle, {\n        type: \"source\",\n        position: Position.Right,\n        className: `right ${data.activeHandle === `${data.id}-right` ? 'dragging' : ''}`,\n        style: {\n          opacity: isHovering && !isDragging ? hoveredArea === 'right' ? 1 : 0.5 : 0\n        },\n        isConnectable: !isEditing,\n        id: `${data.id}-right`,\n        onMouseEnter: () => handleAreaHover('right'),\n        onMouseLeave: handleAreaLeave\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 645,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CustomHandle, {\n        type: \"target\",\n        position: Position.Left,\n        className: \"left\",\n        style: {\n          opacity: isHovering && !isDragging ? hoveredArea === 'left' ? 1 : 0.5 : 0\n        },\n        isConnectable: !isEditing,\n        id: `${data.id}-left`,\n        onMouseEnter: () => handleAreaHover('left'),\n        onMouseLeave: handleAreaLeave\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 657,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CustomHandle, {\n        type: \"source\",\n        position: Position.Bottom,\n        className: \"bottom\",\n        style: {\n          opacity: isHovering && !isDragging ? hoveredArea === 'bottom' ? 1 : 0.5 : 0\n        },\n        isConnectable: !isEditing,\n        id: `${data.id}-bottom`,\n        onMouseEnter: () => handleAreaHover('bottom'),\n        onMouseLeave: handleAreaLeave\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 669,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }, [isEditing, isHovering, isDragging, hoveredArea, isConnecting, connectingHandle, data.id, data.activeHandle, handleMouseDown, handleAreaHover, handleAreaLeave]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ShadowLayer, {\n      initial: false,\n      animate: {\n        filter: isDragging ? 'drop-shadow(32px 32px 0px #000000) drop-shadow(48px 48px 0px #05FD11)' : 'drop-shadow(0px 0px 0px #000000) drop-shadow(0px 0px 0px #05FD11)',\n        transition: {\n          duration: 0.3,\n          ease: \"easeOut\",\n          delay: isDragging ? 0.2 : 0 // Add delay only when dragging\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 687,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(NodeContainer, {\n      ref: nodeRef,\n      initial: {\n        scale: 1\n      },\n      animate: {\n        scale: isDragging ? 1.05 : 1,\n        boxShadow: isDragging ? '16px 16px 0 -2px #000, 16px 16px 0 0 #05FD11' : '0px 0px 0 -2px #000, 0px 0px 0 0 #05FD11',\n        transition: {\n          duration: 0.3,\n          ease: [0.2, 0.8, 0.2, 1],\n          boxShadow: {\n            duration: 0.3\n          }\n        }\n      },\n      whileHover: {\n        scale: isDragging ? 1.05 : 1.02,\n        boxShadow: isDragging ? '16px 16px 0 -2px #000, 16px 16px 0 0 #05FD11' : '8px 8px 0 -2px #000, 8px 8px 0 0 #05FD11',\n        transition: {\n          duration: 0.3,\n          ease: [0.2, 0.8, 0.2, 1],\n          boxShadow: {\n            duration: 0.3\n          }\n        }\n      },\n      style: {\n        animation: isDragging ? 'jitter 0.3s infinite' : 'none',\n        cursor: isDragging ? 'grabbing' : 'grab'\n      },\n      isDragging: isDragging,\n      onMouseMove: handleMouseMove,\n      onMouseLeave: () => {\n        setIsHovering(false);\n        setHoveredArea(null);\n      },\n      children: [/*#__PURE__*/_jsxDEV(AnimatePresence, {\n        mode: \"wait\",\n        children: isEditing ? /*#__PURE__*/_jsxDEV(EditModeContent, {\n          initial: {\n            opacity: 0,\n            y: 5\n          },\n          animate: {\n            opacity: 1,\n            y: 0\n          },\n          exit: {\n            opacity: 0\n          },\n          transition: {\n            duration: 0.1\n          },\n          style: {\n            cursor: isDragging ? 'grabbing' : 'text'\n          },\n          children: [/*#__PURE__*/_jsxDEV(InputWrapper, {\n            children: [/*#__PURE__*/_jsxDEV(HeaderRow, {\n              children: [/*#__PURE__*/_jsxDEV(EditIconWrapper, {\n                children: defaultIcon\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 748,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                autoFocus: true,\n                value: inputValue,\n                onChange: handleInputChange,\n                onKeyDown: handleKeyDown,\n                onBlur: handleInputBlur,\n                placeholder: \"Heading (\\u21E7\\u21B5 for paragraph)\",\n                onPaste: handlePaste\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 751,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 747,\n              columnNumber: 17\n            }, this), paragraphs.map((paragraph, index) => /*#__PURE__*/_jsxDEV(ParagraphInput, {\n              value: paragraph,\n              onChange: e => handleParagraphChange(index, e.target.value),\n              onKeyDown: handleKeyDown,\n              placeholder: \"Continue writing...\"\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 762,\n              columnNumber: 19\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 746,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ActionBar, {\n            children: /*#__PURE__*/_jsxDEV(ActionGroup, {\n              children: [/*#__PURE__*/_jsxDEV(ActionButton, {\n                \"aria-label\": \"Upload Document\",\n                $active: inputType === 'document',\n                onClick: () => handleTypeChange('document'),\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"hn hn-file-import\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 778,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                  children: \"upload file\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 779,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 773,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(ActionButton, {\n                \"aria-label\": \"Upload Image\",\n                $active: inputType === 'image',\n                onClick: () => handleTypeChange('image'),\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"hn hn-image\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 786,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                  children: \"upload image\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 787,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 781,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(ActionButton, {\n                \"aria-label\": \"External Link\",\n                $active: inputType === 'link',\n                onClick: () => handleTypeChange('link'),\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"hn hn-external-link\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 794,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                  children: \"external link\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 795,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 789,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(ActionButton, {\n                \"aria-label\": \"Save\",\n                onClick: () => setIsEditing(false),\n                style: {\n                  marginLeft: 'auto'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"hn hn-check\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 802,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                  children: \"save (enter)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 803,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 797,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(ActionButton, {\n                \"aria-label\": \"Cancel\",\n                onClick: () => {\n                  var _data$onRemove2;\n                  return (_data$onRemove2 = data.onRemove) === null || _data$onRemove2 === void 0 ? void 0 : _data$onRemove2.call(data);\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"hn hn-times\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 809,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                  children: \"cancel (esc)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 810,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 805,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 772,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 771,\n            columnNumber: 15\n          }, this)]\n        }, \"edit\", true, {\n          fileName: _jsxFileName,\n          lineNumber: 738,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(motion.div, {\n          initial: {\n            opacity: 0,\n            y: -5\n          },\n          animate: {\n            opacity: 1,\n            y: 0\n          },\n          exit: {\n            opacity: 0\n          },\n          transition: {\n            duration: 0.1\n          },\n          whileHover: \"hover\",\n          children: [/*#__PURE__*/_jsxDEV(ViewContent, {\n            children: [/*#__PURE__*/_jsxDEV(ViewHeader, {\n              children: [/*#__PURE__*/_jsxDEV(ViewIconWrapper, {\n                children: defaultIcon\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 826,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(ViewHeading, {\n                children: inputValue\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 829,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 825,\n              columnNumber: 17\n            }, this), paragraphs.length > 0 && /*#__PURE__*/_jsxDEV(ViewParagraph, {\n              children: paragraphs[0]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 832,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 824,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ViewModeActions, {\n            variants: {\n              hover: {\n                opacity: 1,\n                transition: {\n                  duration: 0.1\n                }\n              }\n            },\n            isDragging: isDragging,\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"hn hn-pencil\",\n              onClick: () => setIsEditing(true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 844,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"hn hn-eye\",\n              onClick: handleShowOverlay\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 848,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 835,\n            columnNumber: 15\n          }, this)]\n        }, \"view\", true, {\n          fileName: _jsxFileName,\n          lineNumber: 816,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 736,\n        columnNumber: 9\n      }, this), handles]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 700,\n      columnNumber: 7\n    }, this), showPreview && pastedContent && /*#__PURE__*/_jsxDEV(Suspense, {\n      fallback: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading preview...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 861,\n        columnNumber: 29\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(PreviewPanel, {\n        initial: {\n          height: 0,\n          opacity: 0\n        },\n        animate: {\n          height: 'auto',\n          opacity: 1\n        },\n        exit: {\n          height: 0,\n          opacity: 0\n        },\n        children: /*#__PURE__*/_jsxDEV(PreviewContent, {\n          children: pastedContent.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 867,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 862,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 861,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}, \"uhFGnlqA0+ZbZ0Kbpsjlz2KWPoo=\", false, function () {\n  return [useOverlay];\n})), \"uhFGnlqA0+ZbZ0Kbpsjlz2KWPoo=\", false, function () {\n  return [useOverlay];\n});\n\n// Adding displayName for improved debugging\n_c23 = CustomNodeComponent;\nCustomNodeComponent.displayName = 'CustomNodeComponent';\n\n// Export the memoized component to prevent recreation of nodeTypes\nexport const CustomNode = /*#__PURE__*/React.memo(CustomNodeComponent);\n_c24 = CustomNode;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18, _c19, _c20, _c21, _c22, _c23, _c24;\n$RefreshReg$(_c, \"ShadowLayer\");\n$RefreshReg$(_c2, \"NodeContainer\");\n$RefreshReg$(_c3, \"EditModeContent\");\n$RefreshReg$(_c4, \"ViewModeActions\");\n$RefreshReg$(_c5, \"CustomHandle\");\n$RefreshReg$(_c6, \"InputWrapper\");\n$RefreshReg$(_c7, \"HeaderRow\");\n$RefreshReg$(_c8, \"Input\");\n$RefreshReg$(_c9, \"ParagraphInput\");\n$RefreshReg$(_c10, \"ActionBar\");\n$RefreshReg$(_c11, \"ActionGroup\");\n$RefreshReg$(_c12, \"ActionButton\");\n$RefreshReg$(_c13, \"Tooltip\");\n$RefreshReg$(_c14, \"PreviewContent\");\n$RefreshReg$(_c15, \"PreviewPanel\");\n$RefreshReg$(_c16, \"ViewContent\");\n$RefreshReg$(_c17, \"ViewHeader\");\n$RefreshReg$(_c18, \"ViewIconWrapper\");\n$RefreshReg$(_c19, \"ViewHeading\");\n$RefreshReg$(_c20, \"ViewParagraph\");\n$RefreshReg$(_c21, \"EditIconWrapper\");\n$RefreshReg$(_c22, \"CustomNodeComponent$React.memo\");\n$RefreshReg$(_c23, \"CustomNodeComponent\");\n$RefreshReg$(_c24, \"CustomNode\");","map":{"version":3,"names":["React","useState","useCallback","useRef","useEffect","lazy","Suspense","Handle","Position","styled","motion","AnimatePresence","useOverlay","defaultIcon","jsxDEV","_jsxDEV","Fragment","_Fragment","jitterKeyframes","edgeAnimationKeyframes","ShadowLayer","div","attrs","props","style","filter","isDragging","_c","NodeContainer","theme","terminal","bg","border","_c2","EditModeContent","_c3","ViewModeActions","_c4","handleJitterKeyframes","HANDLE_PADDING","HANDLE_SIZE","CustomHandle","text","_c5","InputWrapper","_c6","HeaderRow","_c7","Input","input","_c8","ParagraphInput","_c9","ActionBar","_c10","ActionGroup","_c11","ActionButton","button","$active","_c12","Tooltip","_c13","PreviewContent","_c14","PreviewPanel","_c15","ViewContent","_c16","ViewHeader","_c17","ViewIconWrapper","_c18","ViewHeading","h3","_c19","ViewParagraph","p","_c20","SlidePanel","OverlayHeading","h2","OverlayParagraph","OverlayActions","EditIconWrapper","_c21","CustomNodeComponent","_s","memo","_c22","data","isEditing","setIsEditing","inputValue","setInputValue","content","setIsDragging","hoveredConnector","setHoveredConnector","inputType","setInputType","nodeRef","isDraggingRef","hoveredArea","setHoveredArea","isHovering","setIsHovering","pastedContent","setPastedContent","showPreview","setShowPreview","paragraphs","setParagraphs","showOverlay","isConnecting","setIsConnecting","connectingHandle","setConnectingHandle","connectingRef","handleRefs","handleMouseMove","e","handleClickOutside","current","contains","target","trim","_data$onRemove","onRemove","call","document","addEventListener","removeEventListener","handleInputChange","_data$onChange","value","onChange","handleKeyDown","key","shiftKey","preventDefault","handleTypeChange","type","handleInputBlur","setTimeout","_nodeRef$current","newFocusedElement","activeElement","isWithinNode","_data$setIsEditing","handleAreaHover","area","handleAreaLeave","handlePaste","clipboardData","html","getData","parser","DOMParser","doc","parseFromString","heading","querySelector","title","textContent","replace","originalHtml","handleParagraphChange","index","newParagraphs","handleShowOverlay","onEdit","handleMouseDown","event","position","stopPropagation","handleElement","rect","getBoundingClientRect","nodeRect","console","log","handleX","left","width","handleY","top","height","nodeEdgeX","right","nodeEdgeY","bottom","handleMouseUp","getConnectionPoint","handle","x","y","handles","useMemo","children","Top","className","opacity","isConnectable","id","ref","el","onMouseDown","onConnect","connection","sourceX","sourceY","fileName","_jsxFileName","lineNumber","columnNumber","Right","activeHandle","onMouseEnter","onMouseLeave","Left","Bottom","initial","animate","transition","duration","ease","delay","scale","boxShadow","whileHover","animation","cursor","onMouseMove","mode","exit","autoFocus","onKeyDown","onBlur","placeholder","onPaste","map","paragraph","onClick","marginLeft","_data$onRemove2","length","variants","hover","fallback","_c23","displayName","CustomNode","_c24","$RefreshReg$"],"sources":["/Users/alexandertraykov/Documents/Documents/synapse-sys/src/components/NodeInput.jsx"],"sourcesContent":["import React, { useState, useCallback, useRef, useEffect, lazy, Suspense } from 'react';\nimport { \n  Handle, \n  Position,\n  // Remove unused imports:\n  // ReactFlow,\n  // useNodesState,\n  // useEdgesState,\n  // getCenter\n} from 'reactflow';\nimport 'reactflow/dist/style.css';\nimport styled from 'styled-components';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useOverlay } from '../context/OverlayContext';\nimport { defaultIcon } from '../context/OverlayContext';\n\nconst jitterKeyframes = `\n  @keyframes jitter {\n    0% { transform: translate(0, 0) rotate(0deg); }\n    25% { transform: translate(1px, 1px) rotate(0.5deg); }\n    50% { transform: translate(-1px, -1px) rotate(-0.5deg); }\n    75% { transform: translate(-1px, 1px) rotate(0.5deg); }\n    100% { transform: translate(1px, -1px) rotate(-0.5deg); }\n  }\n`;\n\nconst edgeAnimationKeyframes = `\n  @keyframes flowAnimation {\n    from {\n      stroke-dashoffset: 20;\n    }\n    to {\n      stroke-dashoffset: 0;\n    }\n  }\n`;\n\nconst ShadowLayer = styled(motion.div).attrs(props => ({\n  style: {\n    filter: props.isDragging \n      ? 'drop-shadow(32px 32px 0px #000000) drop-shadow(48px 48px 0px #05FD11)'\n      : 'drop-shadow(0px 0px 0px #000000) drop-shadow(0px 0px 0px #05FD11)'\n  }\n}))`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  z-index: -1;\n`;\n\nconst NodeContainer = styled(motion.div)`\n  ${jitterKeyframes}\n  background: ${props => props.theme.terminal.bg};\n  border: 2px solid ${props => props.theme.terminal.border};\n  padding: 12px;\n  min-width: 300px;\n  position: relative;\n  cursor: ${props => props.isDragging ? 'grabbing' : 'grab'};\n  z-index: 1000;\n\n  &:hover {\n    .handle {\n      opacity: 0.5;\n    }\n  }\n`;\n\nconst EditModeContent = styled(motion.div)`\n  width: 100%;\n`;\n\nconst ViewModeActions = styled(motion.div)`\n  position: absolute;\n  top: 12px;\n  right: 12px;\n  display: flex;\n  gap: 12px;\n  opacity: 0;\n  transition: opacity 0.2s;\n\n  i {\n    font-size: 16px;\n    color: #0EF928;\n    cursor: pointer;\n    opacity: ${props => props.isDragging ? 0.5 : 1};\n    transition: opacity 0.2s;\n    \n    &.hn-times {\n      color: #ff0000;\n    }\n\n    &.hn-pencil {\n      margin-right: 4px;\n    }\n  }\n`;\n\nconst handleJitterKeyframes = `\n  @keyframes handleJitter {\n    0% { transform: translate(0, 0); }\n    25% { transform: translate(0.5px, 0.5px); }\n    50% { transform: translate(-0.5px, -0.5px); }\n    75% { transform: translate(-0.5px, 0.5px); }\n    100% { transform: translate(0.5px, -0.5px); }\n  }\n`;\n\n// First, let's define our constants for the handle positions\nconst HANDLE_PADDING = 32; // The default padding of the handle from the node\nconst HANDLE_SIZE = 8;    // The width/height of the handle dot\n\nconst CustomHandle = styled(Handle)`\n  ${handleJitterKeyframes}\n  ${edgeAnimationKeyframes}\n  width: ${HANDLE_SIZE}px;\n  height: ${HANDLE_SIZE}px;\n  background: ${props => props.theme.terminal.text};\n  border: 2px solid ${props => props.theme.terminal.border};\n  opacity: 0;\n  transition: all 0.1s cubic-bezier(0.2, 0.8, 0.2, 1);\n  position: absolute;\n\n  &.react-flow__handle {\n    z-index: 1;\n  }\n\n  &.top {\n    top: -${HANDLE_SIZE/2}px;\n    left: 50%;\n    transform: translateX(-50%);\n    \n    &.connecting {\n      background: #000;\n      border: 2px solid #0EF928;\n      opacity: 1;\n      z-index: 1000;\n    }\n  }\n  \n  &.right {\n    right: -${HANDLE_SIZE/2}px;\n    top: 50%;\n    transform: translateY(-50%);\n    \n    &.connecting {\n      background: #000;\n      border: 2px solid #0EF928;\n      opacity: 1;\n      z-index: 1000;\n    }\n  }\n  \n  &.bottom {\n    bottom: -${HANDLE_SIZE/2}px;\n    left: 50%;\n    transform: translateX(-50%);\n    \n    &.connecting {\n      background: #000;\n      border: 2px solid #0EF928;\n      opacity: 1;\n      z-index: 1000;\n    }\n  }\n  \n  &.left {\n    left: -${HANDLE_SIZE/2}px;\n    top: 50%;\n    transform: translateY(-50%);\n    \n    &.connecting {\n      background: #000;\n      border: 2px solid #0EF928;\n      opacity: 1;\n      z-index: 1000;\n    }\n  }\n\n  &:hover {\n    background: #0EF928;\n    opacity: 1 !important;\n  }\n`;\n\nconst InputWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n`;\n\nconst HeaderRow = styled.div`\n  display: flex;\n  align-items: center;\n  position: relative;\n  padding-left: 32px;  // Space for icon\n`;\n\nconst Input = styled.input`\n  background: none;\n  border: none;\n  border-bottom: 2px solid ${props => props.theme.terminal.text};\n  color: ${props => props.theme.terminal.text};\n  font-family: 'VT323', monospace;\n  font-size: 20px;\n  width: 100%;\n  padding: 4px 4px 6px 4px;\n  \n  &:focus {\n    outline: none;\n    border-bottom-color: #0EF928;\n  }\n\n  &::placeholder {\n    color: ${props => props.theme.terminal.text}80;\n  }\n`;\n\nconst ParagraphInput = styled(Input)`\n  font-size: 16px;  // Smaller than header\n  margin-top: 8px;\n  padding-left: 0;  // Remove left padding since it's full width\n  width: 100%;\n`;\n\nconst ActionBar = styled.div`\n  display: flex;\n  align-items: center;\n  margin-top: 8px;\n`;\n\nconst ActionGroup = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  width: 100%;\n`;\n\nconst ActionButton = styled.button`\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 4px;\n  opacity: ${props => props.$active ? '1' : '0.7'};\n  transition: all 0.2s;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 24px;\n\n  &:hover {\n    opacity: 1;\n    transform: scale(1.1);\n  }\n\n  i {\n    font-size: 20px;\n    color: ${props => props.theme.terminal.text};\n  }\n`;\n\nconst Tooltip = styled.div`\n  position: absolute;\n  bottom: -24px;\n  left: 50%;\n  transform: translateX(-50%);\n  background: #000000;\n  border: 2px solid #0EF928;\n  padding: 4px 8px;\n  font-size: 12px;\n  color: #0EF928;\n  white-space: nowrap;\n  pointer-events: none;\n  opacity: 0;\n  transition: opacity 0.2s;\n  font-family: 'VT323', monospace;\n  z-index: 1001;\n\n  ${ActionButton}:hover & {\n    opacity: 1;\n  }\n`;\n\nconst PreviewContent = styled.div`\n  font-size: 16px;\n  color: ${props => props.theme.terminal.text};\n  line-height: 1.5;\n  padding: 12px 0;\n  white-space: pre-wrap;\n`;\n\nconst PreviewPanel = styled(motion.div)`\n  position: fixed;\n  bottom: 0;\n  right: 0;\n  width: 400px;\n  max-height: 70vh;\n  background: ${props => props.theme.terminal.bg};\n  border-top: 2px solid ${props => props.theme.terminal.border};\n  border-left: 2px solid ${props => props.theme.terminal.border};\n  padding: 24px;\n  z-index: 1000;\n  overflow-y: auto;\n  box-shadow: -8px -8px 0 -2px #000, -8px -8px 0 0 #05FD11;\n`;\n\nconst ViewContent = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n`;\n\nconst ViewHeader = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n`;\n\nconst ViewIconWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n`;\n\nconst ViewHeading = styled.h3`\n  margin: 0;\n  font-size: 20px;\n  font-weight: normal;\n  color: ${props => props.theme.terminal.text};\n`;\n\nconst ViewParagraph = styled.p`\n  margin: 0;\n  padding-left: 40px;\n  color: ${props => props.theme.terminal.text};\n  opacity: 0.5;\n`;\n\nconst SlidePanel = styled(motion.div)`\n  position: fixed;\n  bottom: 0;\n  right: 0;\n  width: 400px;\n  max-height: 70vh;\n  background: ${props => props.theme.terminal.bg};\n  border-top: 2px solid ${props => props.theme.terminal.border};\n  border-left: 2px solid ${props => props.theme.terminal.border};\n  padding: 24px;\n  z-index: 1000;\n  overflow-y: auto;\n  box-shadow: -8px -8px 0 -2px #000, -8px -8px 0 0 #05FD11;\n`;\n\nconst OverlayHeading = styled.h2`\n  font-size: 24px;\n  color: ${props => props.theme.terminal.text};\n  margin-bottom: 16px;\n`;\n\nconst OverlayParagraph = styled.p`\n  font-size: 16px;\n  color: ${props => props.theme.terminal.text}80;\n  line-height: 1.5;\n  white-space: pre-wrap;\n`;\n\nconst OverlayActions = styled.div`\n  position: absolute;\n  top: 24px;\n  right: 24px;\n  display: flex;\n  gap: 16px;\n\n  i {\n    font-size: 20px;\n    color: ${props => props.theme.terminal.text};\n    cursor: pointer;\n    opacity: 0.7;\n    transition: opacity 0.2s;\n\n    &:hover {\n      opacity: 1;\n    }\n  }\n`;\n\nconst EditIconWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  position: absolute;\n  left: 0;\n`;\n\n// Custom Node Component\nconst CustomNodeComponent = React.memo(({ data }) => {\n  const [isEditing, setIsEditing] = useState(true);\n  const [inputValue, setInputValue] = useState(data.content || '');\n  const [isDragging, setIsDragging] = useState(false);\n  const [hoveredConnector, setHoveredConnector] = useState(null);\n  const [inputType, setInputType] = useState('text');\n  const nodeRef = useRef(null);\n  const isDraggingRef = useRef(false);\n  const [hoveredArea, setHoveredArea] = useState(null);\n  const [isHovering, setIsHovering] = useState(false);\n  const [pastedContent, setPastedContent] = useState(null);\n  const [showPreview, setShowPreview] = useState(false);\n  const [paragraphs, setParagraphs] = useState([]);\n  const { showOverlay } = useOverlay();\n  const [isConnecting, setIsConnecting] = useState(false);\n  const [connectingHandle, setConnectingHandle] = useState(null);\n  const connectingRef = useRef(false);\n  const handleRefs = useRef({});  // Store refs for each handle\n\n  // Update hover detection with larger area\n  const handleMouseMove = useCallback((e) => {\n    if (isEditing) return;\n    setIsHovering(true);  // Show all dots when hovering over node\n  }, [isEditing]);\n\n  // Update click outside handler\n  useEffect(() => {\n    const handleClickOutside = (e) => {\n      // Don't handle click outside if we're dragging\n      if (isDragging) return;\n\n      if (nodeRef.current && !nodeRef.current.contains(e.target)) {\n        if (inputValue.trim()) {\n          setIsEditing(false); // Save on click outside if there's content\n        } else {\n          data.onRemove?.(); // Remove if empty\n        }\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, [inputValue, data.onRemove, isDragging]);\n\n  const handleInputChange = (e) => {\n    setInputValue(e.target.value);\n    data.onChange?.(e.target.value);\n  };\n\n  const handleKeyDown = (e) => {\n    if (isDragging) return;\n\n    if (e.key === 'Enter') {\n      if (e.shiftKey) {\n        // Add new paragraph\n        e.preventDefault();\n        setParagraphs([...paragraphs, '']);\n      } else if (inputValue.trim()) {\n        e.preventDefault();\n        setIsEditing(false);\n      }\n    }\n    if (e.key === 'Escape') {\n      if (inputValue.trim()) {\n        setIsEditing(false);\n      }\n    }\n  };\n\n  const handleTypeChange = (type) => {\n    setInputType(type);\n  };\n\n  const handleInputBlur = (e) => {\n    // Don't handle blur if we're dragging\n    if (isDragging) return;\n\n    // Check if the new focused element is within our node\n    setTimeout(() => {\n      const newFocusedElement = document.activeElement;\n      const isWithinNode = nodeRef.current?.contains(newFocusedElement);\n      \n      if (!isWithinNode && inputValue.trim()) {\n        setIsEditing(false);\n      }\n    }, 0);\n  };\n\n  // When local editing state changes, update parent\n  useEffect(() => {\n    data.setIsEditing?.(isEditing);\n  }, [isEditing, data.setIsEditing]);\n\n  // Update the drag state effect to use the ref\n  useEffect(() => {\n    isDraggingRef.current = !!data.isDragging;\n    setIsDragging(!!data.isDragging);\n  }, [data.isDragging]);\n\n  const handleAreaHover = (area) => {\n    setHoveredArea(area);\n    setIsHovering(true);\n  };\n\n  const handleAreaLeave = () => {\n    setHoveredArea(null);\n    setIsHovering(false);\n  };\n\n  const handlePaste = (e) => {\n    e.preventDefault();\n    \n    // Get clipboard content as HTML\n    const clipboardData = e.clipboardData;\n    const html = clipboardData.getData('text/html');\n    const text = clipboardData.getData('text');\n\n    if (html) {\n      // Parse the HTML content\n      const parser = new DOMParser();\n      const doc = parser.parseFromString(html, 'text/html');\n      \n      // Look for headings\n      const heading = doc.querySelector('h1, h2, h3, h4, h5, h6');\n      const title = heading ? heading.textContent : '';\n      \n      // Get remaining content\n      const content = text.replace(title, '').trim();\n      \n      // Update node with structured content\n      setPastedContent({\n        title,\n        content,\n        originalHtml: html\n      });\n\n      // Set the title as the input value\n      setInputValue(title);\n      \n      // Show preview panel with content\n      setShowPreview(true);\n    } else {\n      // Just plain text, use as is\n      setInputValue(text);\n    }\n  };\n\n  // Add paragraph change handler\n  const handleParagraphChange = (index, value) => {\n    const newParagraphs = [...paragraphs];\n    newParagraphs[index] = value;\n    setParagraphs(newParagraphs);\n  };\n\n  const handleShowOverlay = () => {\n    showOverlay({\n      title: inputValue,\n      paragraphs,\n      onEdit: () => setIsEditing(true)\n    });\n  };\n\n  const handleMouseDown = (event, position) => {\n    event.stopPropagation();\n    setIsConnecting(true);\n    setConnectingHandle(position);\n    connectingRef.current = true;\n    \n    // Log handle position - make sure handleRefs is properly initialized\n    if (handleRefs.current && handleRefs.current[position]) {\n      const handleElement = handleRefs.current[position];\n      const rect = handleElement.getBoundingClientRect();\n      const nodeRect = nodeRef.current.getBoundingClientRect();\n      \n      console.log('Handle DOM position:', {\n        position,\n        handleX: rect.left + rect.width/2,\n        handleY: rect.top + rect.height/2,\n        nodeEdgeX: position === 'left' ? nodeRect.left : position === 'right' ? nodeRect.right : rect.left + rect.width/2,\n        nodeEdgeY: position === 'top' ? nodeRect.top : position === 'bottom' ? nodeRect.bottom : rect.top + rect.height/2\n      });\n    }\n  };\n\n  const handleMouseUp = (event) => {\n    if (connectingRef.current) {\n      setIsConnecting(false);\n      setConnectingHandle(null);\n      connectingRef.current = false;\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener('mouseup', handleMouseUp);\n    return () => document.removeEventListener('mouseup', handleMouseUp);\n  }, []);\n\n  // Add this function to calculate connection point\n  const getConnectionPoint = useCallback((handle) => {\n    if (!isConnecting || connectingHandle !== handle) return null;\n    \n    // Return coordinates based on handle position\n    switch (handle) {\n      case 'top':\n        return { x: '50%', y: 0 }; // At the node's top border\n      case 'right':\n        return { x: '100%', y: '50%' }; // At the node's right border\n      case 'bottom':\n        return { x: '50%', y: '100%' }; // At the node's bottom border\n      case 'left':\n        return { x: 0, y: '50%' }; // At the node's left border\n      default:\n        return null;\n    }\n  }, [isConnecting, connectingHandle]);\n\n  // Memoize expensive calculations or components\n  const handles = React.useMemo(() => {\n    if (isEditing) return null;\n    \n    return (\n      <>\n        <CustomHandle \n          type=\"target\" \n          position={Position.Top} \n          className={`top ${isConnecting && connectingHandle === 'top' ? 'connecting' : ''}`}\n          style={{ \n            opacity: (isHovering && !isDragging) || (isConnecting && connectingHandle === 'top') ? 1 : 0\n          }}\n          isConnectable={!isEditing}\n          id={`${data.id}-top`}\n          ref={(el) => handleRefs.current['top'] = el}\n          onMouseDown={(e) => handleMouseDown(e, 'top')}\n          onConnect={(connection) => {\n            const handleElement = handleRefs.current['top'];\n            if (handleElement && isConnecting) {\n              const rect = handleElement.getBoundingClientRect();\n              connection.sourceX = rect.left + (rect.width / 2);\n              connection.sourceY = rect.top;\n            }\n          }}\n        />\n        <CustomHandle \n          type=\"source\" \n          position={Position.Right}\n          className={`right ${data.activeHandle === `${data.id}-right` ? 'dragging' : ''}`}\n          style={{ \n            opacity: isHovering && !isDragging ? (hoveredArea === 'right' ? 1 : 0.5) : 0\n          }}\n          isConnectable={!isEditing}\n          id={`${data.id}-right`}\n          onMouseEnter={() => handleAreaHover('right')}\n          onMouseLeave={handleAreaLeave}\n        />\n        <CustomHandle \n          type=\"target\" \n          position={Position.Left}\n          className=\"left\" \n          style={{ \n            opacity: isHovering && !isDragging ? (hoveredArea === 'left' ? 1 : 0.5) : 0\n          }}\n          isConnectable={!isEditing}\n          id={`${data.id}-left`}\n          onMouseEnter={() => handleAreaHover('left')}\n          onMouseLeave={handleAreaLeave}\n        />\n        <CustomHandle \n          type=\"source\" \n          position={Position.Bottom}\n          className=\"bottom\" \n          style={{ \n            opacity: isHovering && !isDragging ? (hoveredArea === 'bottom' ? 1 : 0.5) : 0\n          }}\n          isConnectable={!isEditing}\n          id={`${data.id}-bottom`}\n          onMouseEnter={() => handleAreaHover('bottom')}\n          onMouseLeave={handleAreaLeave}\n        />\n      </>\n    );\n  }, [isEditing, isHovering, isDragging, hoveredArea, isConnecting, connectingHandle, data.id, data.activeHandle, handleMouseDown, handleAreaHover, handleAreaLeave]);\n\n  return (\n    <>\n      <ShadowLayer\n        initial={false}\n        animate={{ \n          filter: isDragging \n            ? 'drop-shadow(32px 32px 0px #000000) drop-shadow(48px 48px 0px #05FD11)'\n            : 'drop-shadow(0px 0px 0px #000000) drop-shadow(0px 0px 0px #05FD11)',\n          transition: { \n            duration: 0.3,\n            ease: \"easeOut\",\n            delay: isDragging ? 0.2 : 0 // Add delay only when dragging\n          }\n        }}\n      />\n      <NodeContainer\n        ref={nodeRef}\n        initial={{ scale: 1 }}\n        animate={{ \n          scale: isDragging ? 1.05 : 1,\n          boxShadow: isDragging \n            ? '16px 16px 0 -2px #000, 16px 16px 0 0 #05FD11'\n            : '0px 0px 0 -2px #000, 0px 0px 0 0 #05FD11',\n          transition: { \n            duration: 0.3, \n            ease: [0.2, 0.8, 0.2, 1],\n            boxShadow: { duration: 0.3 }\n          }\n        }}\n        whileHover={{ \n          scale: isDragging ? 1.05 : 1.02,\n          boxShadow: isDragging \n            ? '16px 16px 0 -2px #000, 16px 16px 0 0 #05FD11'\n            : '8px 8px 0 -2px #000, 8px 8px 0 0 #05FD11',\n          transition: { \n            duration: 0.3,\n            ease: [0.2, 0.8, 0.2, 1],\n            boxShadow: { duration: 0.3 }\n          }\n        }}\n        style={{\n          animation: isDragging ? 'jitter 0.3s infinite' : 'none',\n          cursor: isDragging ? 'grabbing' : 'grab'\n        }}\n        isDragging={isDragging}\n        onMouseMove={handleMouseMove}\n        onMouseLeave={() => {\n          setIsHovering(false);\n          setHoveredArea(null);\n        }}\n      >\n        <AnimatePresence mode=\"wait\">\n          {isEditing ? (\n            <EditModeContent\n              key=\"edit\"\n              initial={{ opacity: 0, y: 5 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0 }}\n              transition={{ duration: 0.1 }}\n              style={{ cursor: isDragging ? 'grabbing' : 'text' }}\n            >\n              <InputWrapper>\n                <HeaderRow>\n                  <EditIconWrapper>\n                    {defaultIcon}\n                  </EditIconWrapper>\n                  <Input \n                    autoFocus\n                    value={inputValue}\n                    onChange={handleInputChange}\n                    onKeyDown={handleKeyDown}\n                    onBlur={handleInputBlur}\n                    placeholder=\"Heading (⇧↵ for paragraph)\"\n                    onPaste={handlePaste}\n                  />\n                </HeaderRow>\n                {paragraphs.map((paragraph, index) => (\n                  <ParagraphInput\n                    key={index}\n                    value={paragraph}\n                    onChange={(e) => handleParagraphChange(index, e.target.value)}\n                    onKeyDown={handleKeyDown}\n                    placeholder=\"Continue writing...\"\n                  />\n                ))}\n              </InputWrapper>\n              <ActionBar>\n                <ActionGroup>\n                  <ActionButton \n                    aria-label=\"Upload Document\"\n                    $active={inputType === 'document'}\n                    onClick={() => handleTypeChange('document')}\n                  >\n                    <i className=\"hn hn-file-import\"></i>\n                    <Tooltip>upload file</Tooltip>\n                  </ActionButton>\n                  <ActionButton \n                    aria-label=\"Upload Image\"\n                    $active={inputType === 'image'}\n                    onClick={() => handleTypeChange('image')}\n                  >\n                    <i className=\"hn hn-image\"></i>\n                    <Tooltip>upload image</Tooltip>\n                  </ActionButton>\n                  <ActionButton \n                    aria-label=\"External Link\"\n                    $active={inputType === 'link'}\n                    onClick={() => handleTypeChange('link')}\n                  >\n                    <i className=\"hn hn-external-link\"></i>\n                    <Tooltip>external link</Tooltip>\n                  </ActionButton>\n                  <ActionButton \n                    aria-label=\"Save\"\n                    onClick={() => setIsEditing(false)}\n                    style={{ marginLeft: 'auto' }}\n                  >\n                    <i className=\"hn hn-check\"></i>\n                    <Tooltip>save (enter)</Tooltip>\n                  </ActionButton>\n                  <ActionButton \n                    aria-label=\"Cancel\"\n                    onClick={() => data.onRemove?.()}\n                  >\n                    <i className=\"hn hn-times\"></i>\n                    <Tooltip>cancel (esc)</Tooltip>\n                  </ActionButton>\n                </ActionGroup>\n              </ActionBar>\n            </EditModeContent>\n          ) : (\n            <motion.div\n              key=\"view\"\n              initial={{ opacity: 0, y: -5 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0 }}\n              transition={{ duration: 0.1 }}\n              whileHover=\"hover\"\n            >\n              <ViewContent>\n                <ViewHeader>\n                  <ViewIconWrapper>\n                    {defaultIcon}\n                  </ViewIconWrapper>\n                  <ViewHeading>{inputValue}</ViewHeading>\n                </ViewHeader>\n                {paragraphs.length > 0 && (\n                  <ViewParagraph>{paragraphs[0]}</ViewParagraph>\n                )}\n              </ViewContent>\n              <ViewModeActions\n                variants={{\n                  hover: { \n                    opacity: 1,\n                    transition: { duration: 0.1 }\n                  }\n                }}\n                isDragging={isDragging}\n              >\n                <i \n                  className=\"hn hn-pencil\"\n                  onClick={() => setIsEditing(true)}\n                />\n                <i \n                  className=\"hn hn-eye\"\n                  onClick={handleShowOverlay}\n                />\n              </ViewModeActions>\n            </motion.div>\n          )}\n        </AnimatePresence>\n\n        {handles}\n      </NodeContainer>\n\n      {showPreview && pastedContent && (\n        <Suspense fallback={<div>Loading preview...</div>}>\n          <PreviewPanel\n            initial={{ height: 0, opacity: 0 }}\n            animate={{ height: 'auto', opacity: 1 }}\n            exit={{ height: 0, opacity: 0 }}\n          >\n            <PreviewContent>\n              {pastedContent.content}\n            </PreviewContent>\n          </PreviewPanel>\n        </Suspense>\n      )}\n    </>\n  );\n});\n\n// Adding displayName for improved debugging\nCustomNodeComponent.displayName = 'CustomNodeComponent';\n\n// Export the memoized component to prevent recreation of nodeTypes\nexport const CustomNode = React.memo(CustomNodeComponent);"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,WAAW,EAAEC,MAAM,EAAEC,SAAS,EAAEC,IAAI,EAAEC,QAAQ,QAAQ,OAAO;AACvF,SACEC,MAAM,EACNC;AACA;AACA;AACA;AACA;AACA;AAAA,OACK,WAAW;AAClB,OAAO,0BAA0B;AACjC,OAAOC,MAAM,MAAM,mBAAmB;AACtC,SAASC,MAAM,EAAEC,eAAe,QAAQ,eAAe;AACvD,SAASC,UAAU,QAAQ,2BAA2B;AACtD,SAASC,WAAW,QAAQ,2BAA2B;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAExD,MAAMC,eAAe,GAAG;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMC,sBAAsB,GAAG;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMC,WAAW,GAAGX,MAAM,CAACC,MAAM,CAACW,GAAG,CAAC,CAACC,KAAK,CAACC,KAAK,KAAK;EACrDC,KAAK,EAAE;IACLC,MAAM,EAAEF,KAAK,CAACG,UAAU,GACpB,uEAAuE,GACvE;EACN;AACF,CAAC,CAAC,CAAC;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,EAAA,GAdIP,WAAW;AAgBjB,MAAMQ,aAAa,GAAGnB,MAAM,CAACC,MAAM,CAACW,GAAG,CAAC;AACxC,IAAIH,eAAe;AACnB,gBAAgBK,KAAK,IAAIA,KAAK,CAACM,KAAK,CAACC,QAAQ,CAACC,EAAE;AAChD,sBAAsBR,KAAK,IAAIA,KAAK,CAACM,KAAK,CAACC,QAAQ,CAACE,MAAM;AAC1D;AACA;AACA;AACA,YAAYT,KAAK,IAAIA,KAAK,CAACG,UAAU,GAAG,UAAU,GAAG,MAAM;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACO,GAAA,GAfIL,aAAa;AAiBnB,MAAMM,eAAe,GAAGzB,MAAM,CAACC,MAAM,CAACW,GAAG,CAAC;AAC1C;AACA,CAAC;AAACc,GAAA,GAFID,eAAe;AAIrB,MAAME,eAAe,GAAG3B,MAAM,CAACC,MAAM,CAACW,GAAG,CAAC;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAeE,KAAK,IAAIA,KAAK,CAACG,UAAU,GAAG,GAAG,GAAG,CAAC;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACW,GAAA,GAxBID,eAAe;AA0BrB,MAAME,qBAAqB,GAAG;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,MAAMC,cAAc,GAAG,EAAE,CAAC,CAAC;AAC3B,MAAMC,WAAW,GAAG,CAAC,CAAC,CAAI;;AAE1B,MAAMC,YAAY,GAAGhC,MAAM,CAACF,MAAM,CAAC;AACnC,IAAI+B,qBAAqB;AACzB,IAAInB,sBAAsB;AAC1B,WAAWqB,WAAW;AACtB,YAAYA,WAAW;AACvB,gBAAgBjB,KAAK,IAAIA,KAAK,CAACM,KAAK,CAACC,QAAQ,CAACY,IAAI;AAClD,sBAAsBnB,KAAK,IAAIA,KAAK,CAACM,KAAK,CAACC,QAAQ,CAACE,MAAM;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAYQ,WAAW,GAAC,CAAC;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAcA,WAAW,GAAC,CAAC;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAeA,WAAW,GAAC,CAAC;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAaA,WAAW,GAAC,CAAC;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACG,GAAA,GAvEIF,YAAY;AAyElB,MAAMG,YAAY,GAAGnC,MAAM,CAACY,GAAG;AAC/B;AACA;AACA;AACA,CAAC;AAACwB,GAAA,GAJID,YAAY;AAMlB,MAAME,SAAS,GAAGrC,MAAM,CAACY,GAAG;AAC5B;AACA;AACA;AACA;AACA,CAAC;AAAC0B,GAAA,GALID,SAAS;AAOf,MAAME,KAAK,GAAGvC,MAAM,CAACwC,KAAK;AAC1B;AACA;AACA,6BAA6B1B,KAAK,IAAIA,KAAK,CAACM,KAAK,CAACC,QAAQ,CAACY,IAAI;AAC/D,WAAWnB,KAAK,IAAIA,KAAK,CAACM,KAAK,CAACC,QAAQ,CAACY,IAAI;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAanB,KAAK,IAAIA,KAAK,CAACM,KAAK,CAACC,QAAQ,CAACY,IAAI;AAC/C;AACA,CAAC;AAACQ,GAAA,GAlBIF,KAAK;AAoBX,MAAMG,cAAc,GAAG1C,MAAM,CAACuC,KAAK,CAAC;AACpC;AACA;AACA;AACA;AACA,CAAC;AAACI,GAAA,GALID,cAAc;AAOpB,MAAME,SAAS,GAAG5C,MAAM,CAACY,GAAG;AAC5B;AACA;AACA;AACA,CAAC;AAACiC,IAAA,GAJID,SAAS;AAMf,MAAME,WAAW,GAAG9C,MAAM,CAACY,GAAG;AAC9B;AACA;AACA;AACA;AACA,CAAC;AAACmC,IAAA,GALID,WAAW;AAOjB,MAAME,YAAY,GAAGhD,MAAM,CAACiD,MAAM;AAClC;AACA;AACA;AACA;AACA,aAAanC,KAAK,IAAIA,KAAK,CAACoC,OAAO,GAAG,GAAG,GAAG,KAAK;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAapC,KAAK,IAAIA,KAAK,CAACM,KAAK,CAACC,QAAQ,CAACY,IAAI;AAC/C;AACA,CAAC;AAACkB,IAAA,GAtBIH,YAAY;AAwBlB,MAAMI,OAAO,GAAGpD,MAAM,CAACY,GAAG;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIoC,YAAY;AAChB;AACA;AACA,CAAC;AAACK,IAAA,GApBID,OAAO;AAsBb,MAAME,cAAc,GAAGtD,MAAM,CAACY,GAAG;AACjC;AACA,WAAWE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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}