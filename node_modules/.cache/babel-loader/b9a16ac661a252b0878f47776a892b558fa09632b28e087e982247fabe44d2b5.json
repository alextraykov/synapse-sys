{"ast":null,"code":"var _jsxFileName = \"/Users/alexandertraykov/Documents/Documents/synapse-sys/src/components/NodeInput.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useCallback, useRef, useEffect } from 'react';\nimport ReactFlow, { Handle, Position, useNodesState, useEdgesState } from 'reactflow';\nimport 'reactflow/dist/style.css';\nimport styled from 'styled-components';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst jitterKeyframes = `\n  @keyframes jitter {\n    0% { transform: translate(0, 0) rotate(0deg); }\n    25% { transform: translate(1px, 1px) rotate(0.5deg); }\n    50% { transform: translate(-1px, -1px) rotate(-0.5deg); }\n    75% { transform: translate(-1px, 1px) rotate(0.5deg); }\n    100% { transform: translate(1px, -1px) rotate(-0.5deg); }\n  }\n`;\nconst CustomNode = styled(motion.div)`\n  ${jitterKeyframes}\n  background: ${props => props.theme.terminal.bg};\n  border: 2px solid ${props => props.theme.terminal.border};\n  padding: 12px;\n  min-width: 300px;\n  position: relative;\n  cursor: ${props => props.isDragging ? 'grabbing' : 'grab'};\n  z-index: 1000;\n`;\n_c = CustomNode;\nconst EditModeContent = styled(motion.div)`\n  width: 100%;\n`;\n_c2 = EditModeContent;\nconst ViewModeActions = styled(motion.div)`\n  position: absolute;\n  top: 12px;\n  right: 12px;\n  display: flex;\n  gap: 12px;\n  opacity: 0;\n\n  i {\n    font-size: 16px;\n    color: #0EF928;\n    cursor: pointer;\n    \n    &.hn-times {\n      color: #ff0000;\n    }\n\n    &.hn-pencil {\n      margin-right: 4px;\n    }\n  }\n`;\n_c3 = ViewModeActions;\nconst CustomHandle = styled(Handle)`\n  width: 8px;\n  height: 8px;\n  background: ${props => props.theme.terminal.text};\n  border: 2px solid ${props => props.theme.terminal.border};\n  opacity: 0;\n  transition: all 0.2s;\n  position: absolute;\n\n  &.top {\n    top: -24px;\n    left: 50%;\n    transform: translateX(-50%);\n  }\n  &.right {\n    right: -24px;\n    top: 50%;\n    transform: translateY(-50%);\n  }\n  &.bottom {\n    bottom: -24px;\n    left: 50%;\n    transform: translateX(-50%);\n  }\n  &.left {\n    left: -24px;\n    top: 50%;\n    transform: translateY(-50%);\n  }\n\n  &:hover {\n    background: #0EF928;\n    transform: scale(1.2);\n  }\n`;\n_c4 = CustomHandle;\nconst InputWrapper = styled.div``;\n_c5 = InputWrapper;\nconst Input = styled.input`\n  background: none;\n  border: none;\n  border-bottom: 2px solid ${props => props.theme.terminal.text};\n  color: ${props => props.theme.terminal.text};\n  font-family: 'VT323', monospace;\n  font-size: 20px;\n  width: 100%;\n  padding: 4px 4px 6px 4px;\n  \n  &:focus {\n    outline: none;\n    border-bottom-color: #0EF928;\n  }\n\n  &::placeholder {\n    color: ${props => props.theme.terminal.text}80;\n  }\n`;\n_c6 = Input;\nconst ActionBar = styled.div`\n  display: flex;\n  align-items: center;\n  margin-top: 8px;\n`;\n_c7 = ActionBar;\nconst ActionGroup = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  width: 100%;\n`;\n_c8 = ActionGroup;\nconst ActionButton = styled.button`\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 4px;\n  opacity: ${props => props.active ? '1' : '0.7'};\n  transition: all 0.2s;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 24px;\n\n  &:hover {\n    opacity: 1;\n    transform: scale(1.1);\n  }\n\n  i {\n    font-size: 20px;\n    color: ${props => props.theme.terminal.text};\n  }\n`;\n_c9 = ActionButton;\nconst Tooltip = styled.div`\n  position: absolute;\n  bottom: -24px;\n  left: 50%;\n  transform: translateX(-50%);\n  background: #000000;\n  border: 2px solid #0EF928;\n  padding: 4px 8px;\n  font-size: 12px;\n  color: #0EF928;\n  white-space: nowrap;\n  pointer-events: none;\n  opacity: 0;\n  transition: opacity 0.2s;\n  font-family: 'VT323', monospace;\n  z-index: 1001;\n\n  ${ActionButton}:hover & {\n    opacity: 1;\n  }\n`;\n\n// Custom Node Component\n_c10 = Tooltip;\nconst CustomNodeComponent = ({\n  data\n}) => {\n  _s();\n  const [isEditing, setIsEditing] = useState(true);\n  const [inputValue, setInputValue] = useState(data.content || '');\n  const [isDragging, setIsDragging] = useState(false);\n  const [hoveredConnector, setHoveredConnector] = useState(null);\n  const [inputType, setInputType] = useState('text');\n  const nodeRef = useRef(null);\n\n  // Add drag handlers\n  const onDragStart = () => setIsDragging(true);\n  const onDragStop = () => setIsDragging(false);\n\n  // Update hover detection with larger area\n  const handleMouseMove = useCallback(e => {\n    var _nodeRef$current;\n    if (isEditing) return;\n    const rect = (_nodeRef$current = nodeRef.current) === null || _nodeRef$current === void 0 ? void 0 : _nodeRef$current.getBoundingClientRect();\n    if (!rect) return;\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    const padding = 60; // Increased detection area\n\n    if (y < 0 && Math.abs(x - rect.width / 2) < padding) {\n      setHoveredConnector('top');\n    } else if (x > rect.width && Math.abs(y - rect.height / 2) < padding) {\n      setHoveredConnector('right');\n    } else if (y > rect.height && Math.abs(x - rect.width / 2) < padding) {\n      setHoveredConnector('bottom');\n    } else if (x < 0 && Math.abs(y - rect.height / 2) < padding) {\n      setHoveredConnector('left');\n    } else {\n      setHoveredConnector(null);\n    }\n  }, [isEditing]);\n\n  // Update click outside handler\n  useEffect(() => {\n    const handleClickOutside = e => {\n      if (nodeRef.current && !nodeRef.current.contains(e.target)) {\n        if (inputValue.trim()) {\n          setIsEditing(false); // Save on click outside if there's content\n        } else {\n          var _data$onRemove;\n          (_data$onRemove = data.onRemove) === null || _data$onRemove === void 0 ? void 0 : _data$onRemove.call(data); // Remove if empty\n        }\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, [inputValue, data.onRemove]);\n  const handleInputChange = e => {\n    var _data$onChange;\n    setInputValue(e.target.value);\n    (_data$onChange = data.onChange) === null || _data$onChange === void 0 ? void 0 : _data$onChange.call(data, e.target.value);\n  };\n  const handleKeyDown = e => {\n    if (e.key === 'Enter' && !e.shiftKey && inputValue.trim()) {\n      e.preventDefault();\n      setIsEditing(false);\n    }\n    if (e.key === 'Escape') {\n      if (inputValue.trim()) {\n        setIsEditing(false);\n      }\n    }\n  };\n  const handleTypeChange = type => {\n    setInputType(type);\n  };\n  const handleInputBlur = e => {\n    if (inputValue.trim()) {\n      setIsEditing(false); // Save on blur if there's content\n    }\n  };\n\n  // When local editing state changes, update parent\n  useEffect(() => {\n    var _data$setIsEditing;\n    (_data$setIsEditing = data.setIsEditing) === null || _data$setIsEditing === void 0 ? void 0 : _data$setIsEditing.call(data, isEditing);\n  }, [isEditing, data.setIsEditing]);\n\n  // Update isDragging when it changes in data\n  useEffect(() => {\n    setIsDragging(data.isDragging || false);\n  }, [data.isDragging]);\n  return /*#__PURE__*/_jsxDEV(CustomNode, {\n    ref: nodeRef,\n    initial: {\n      scale: 1\n    },\n    animate: {\n      scale: isDragging ? 1.05 : 1,\n      filter: isDragging ? 'drop-shadow(16px 16px 0px #000000) drop-shadow(24px 24px 0px #05FD11)' : 'drop-shadow(0px 0px 0px #000000) drop-shadow(0px 0px 0px #05FD11)',\n      transition: {\n        duration: 0.2,\n        ease: \"easeOut\"\n      }\n    },\n    whileHover: {\n      scale: isDragging ? 1.05 : 1.02,\n      filter: 'drop-shadow(4px 4px 0px #000000) drop-shadow(8px 8px 0px #05FD11)',\n      transition: {\n        duration: 0.2,\n        filter: {\n          duration: 0.3\n        }\n      }\n    },\n    style: {\n      animation: isDragging ? 'jitter 0.3s infinite' : 'none'\n    },\n    onMouseMove: handleMouseMove,\n    onMouseLeave: () => setHoveredConnector(null),\n    isDragging: isDragging,\n    onDragStart: onDragStart,\n    onDragStop: onDragStop,\n    children: [/*#__PURE__*/_jsxDEV(AnimatePresence, {\n      mode: \"wait\",\n      children: isEditing ? /*#__PURE__*/_jsxDEV(EditModeContent, {\n        initial: {\n          opacity: 0,\n          y: 5\n        },\n        animate: {\n          opacity: 1,\n          y: 0\n        },\n        exit: {\n          opacity: 0\n        },\n        transition: {\n          duration: 0.1\n        },\n        children: [/*#__PURE__*/_jsxDEV(InputWrapper, {\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            autoFocus: true,\n            value: inputValue,\n            onChange: handleInputChange,\n            onKeyDown: handleKeyDown,\n            onBlur: handleInputBlur,\n            placeholder: \"Type your note...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ActionBar, {\n          children: /*#__PURE__*/_jsxDEV(ActionGroup, {\n            children: [/*#__PURE__*/_jsxDEV(ActionButton, {\n              title: \"Upload Document\",\n              active: inputType === 'document',\n              onClick: () => handleTypeChange('document'),\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"hn hn-file-import\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                children: \"upload file\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(ActionButton, {\n              title: \"Upload Image\",\n              active: inputType === 'image',\n              onClick: () => handleTypeChange('image'),\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"hn hn-image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                children: \"upload image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(ActionButton, {\n              title: \"External Link\",\n              active: inputType === 'link',\n              onClick: () => handleTypeChange('link'),\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"hn hn-external-link\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                children: \"external link\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(ActionButton, {\n              title: \"Save\",\n              onClick: () => setIsEditing(false),\n              style: {\n                marginLeft: 'auto'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"hn hn-check\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                children: \"save (enter)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 346,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(ActionButton, {\n              title: \"Cancel\",\n              onClick: () => {\n                var _data$onRemove2;\n                return (_data$onRemove2 = data.onRemove) === null || _data$onRemove2 === void 0 ? void 0 : _data$onRemove2.call(data);\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"hn hn-times\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                children: \"cancel (esc)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 13\n        }, this)]\n      }, \"edit\", true, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          opacity: 0,\n          y: -5\n        },\n        animate: {\n          opacity: 1,\n          y: 0\n        },\n        exit: {\n          opacity: 0\n        },\n        transition: {\n          duration: 0.1\n        },\n        whileHover: \"hover\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"node-content\",\n          children: inputValue\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ViewModeActions, {\n          variants: {\n            hover: {\n              opacity: 1,\n              transition: {\n                duration: 0.1\n              }\n            }\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"hn hn-pencil\",\n            onClick: () => setIsEditing(true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"hn hn-times\",\n            onClick: () => {\n              var _data$onRemove3;\n              return (_data$onRemove3 = data.onRemove) === null || _data$onRemove3 === void 0 ? void 0 : _data$onRemove3.call(data);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 13\n        }, this)]\n      }, \"view\", true, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 7\n    }, this), !isEditing && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(CustomHandle, {\n        type: \"target\",\n        position: Position.Top,\n        className: \"top\",\n        style: {\n          opacity: hoveredConnector === 'top' ? 1 : 0\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(CustomHandle, {\n        type: \"target\",\n        position: Position.Left,\n        className: \"left\",\n        style: {\n          opacity: hoveredConnector === 'left' ? 1 : 0\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(CustomHandle, {\n        type: \"source\",\n        position: Position.Right,\n        className: \"right\",\n        style: {\n          opacity: hoveredConnector === 'right' ? 1 : 0\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(CustomHandle, {\n        type: \"source\",\n        position: Position.Bottom,\n        className: \"bottom\",\n        style: {\n          opacity: hoveredConnector === 'bottom' ? 1 : 0\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 268,\n    columnNumber: 5\n  }, this);\n};\n_s(CustomNodeComponent, \"J11gJ6Tz6QLK6tKXJVTPaNGQFvw=\");\n_c11 = CustomNodeComponent;\nconst nodeTypes = {\n  custom: CustomNodeComponent\n};\nconst NodeInput = ({\n  position,\n  onComplete\n}) => {\n  _s2();\n  const [nodes, setNodes, onNodesChange] = useNodesState([]);\n  const [edges, setEdges, onEdgesChange] = useEdgesState([]);\n  const [isEditing, setIsEditing] = useState(true);\n  const onConnect = useCallback(params => {\n    setEdges(eds => [...eds, {\n      ...params,\n      animated: true\n    }]);\n  }, [setEdges]);\n  React.useEffect(() => {\n    const newNode = {\n      id: '1',\n      type: 'custom',\n      position,\n      draggable: !isEditing,\n      data: {\n        onChange: value => {\n          setNodes(nds => nds.map(n => n.id === '1' ? {\n            ...n,\n            data: {\n              ...n.data,\n              content: value\n            }\n          } : n));\n        },\n        onRemove: () => onComplete(null),\n        setIsEditing\n      }\n    };\n    setNodes([newNode]);\n  }, [position, isEditing]);\n  return /*#__PURE__*/_jsxDEV(ReactFlow, {\n    nodes: nodes,\n    edges: edges,\n    onNodesChange: onNodesChange,\n    onEdgesChange: onEdgesChange,\n    onConnect: onConnect,\n    nodeTypes: nodeTypes,\n    onNodeDragStart: () => {\n      const node = nodes[0];\n      setNodes([{\n        ...node,\n        data: {\n          ...node.data,\n          isDragging: true\n        }\n      }]);\n    },\n    onNodeDragStop: () => {\n      const node = nodes[0];\n      setNodes([{\n        ...node,\n        data: {\n          ...node.data,\n          isDragging: false\n        }\n      }]);\n    },\n    defaultEdgeOptions: {\n      style: {\n        stroke: '#0EF928',\n        strokeWidth: 2\n      },\n      type: 'smoothstep',\n      animated: true\n    },\n    panOnDrag: !isEditing,\n    zoomOnScroll: !isEditing,\n    selectNodesOnDrag: false\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 454,\n    columnNumber: 5\n  }, this);\n};\n_s2(NodeInput, \"mTw2BWyuvaFYWodMX9dJZuTiHA4=\", false, function () {\n  return [useNodesState, useEdgesState];\n});\n_c12 = NodeInput;\nexport default NodeInput;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12;\n$RefreshReg$(_c, \"CustomNode\");\n$RefreshReg$(_c2, \"EditModeContent\");\n$RefreshReg$(_c3, \"ViewModeActions\");\n$RefreshReg$(_c4, \"CustomHandle\");\n$RefreshReg$(_c5, \"InputWrapper\");\n$RefreshReg$(_c6, \"Input\");\n$RefreshReg$(_c7, \"ActionBar\");\n$RefreshReg$(_c8, \"ActionGroup\");\n$RefreshReg$(_c9, \"ActionButton\");\n$RefreshReg$(_c10, \"Tooltip\");\n$RefreshReg$(_c11, \"CustomNodeComponent\");\n$RefreshReg$(_c12, \"NodeInput\");","map":{"version":3,"names":["React","useState","useCallback","useRef","useEffect","ReactFlow","Handle","Position","useNodesState","useEdgesState","styled","motion","AnimatePresence","jsxDEV","_jsxDEV","Fragment","_Fragment","jitterKeyframes","CustomNode","div","props","theme","terminal","bg","border","isDragging","_c","EditModeContent","_c2","ViewModeActions","_c3","CustomHandle","text","_c4","InputWrapper","_c5","Input","input","_c6","ActionBar","_c7","ActionGroup","_c8","ActionButton","button","active","_c9","Tooltip","_c10","CustomNodeComponent","data","_s","isEditing","setIsEditing","inputValue","setInputValue","content","setIsDragging","hoveredConnector","setHoveredConnector","inputType","setInputType","nodeRef","onDragStart","onDragStop","handleMouseMove","e","_nodeRef$current","rect","current","getBoundingClientRect","x","clientX","left","y","clientY","top","padding","Math","abs","width","height","handleClickOutside","contains","target","trim","_data$onRemove","onRemove","call","document","addEventListener","removeEventListener","handleInputChange","_data$onChange","value","onChange","handleKeyDown","key","shiftKey","preventDefault","handleTypeChange","type","handleInputBlur","_data$setIsEditing","ref","initial","scale","animate","filter","transition","duration","ease","whileHover","style","animation","onMouseMove","onMouseLeave","children","mode","opacity","exit","autoFocus","onKeyDown","onBlur","placeholder","fileName","_jsxFileName","lineNumber","columnNumber","title","onClick","className","marginLeft","_data$onRemove2","variants","hover","_data$onRemove3","position","Top","Left","Right","Bottom","_c11","nodeTypes","custom","NodeInput","onComplete","_s2","nodes","setNodes","onNodesChange","edges","setEdges","onEdgesChange","onConnect","params","eds","animated","newNode","id","draggable","nds","map","n","onNodeDragStart","node","onNodeDragStop","defaultEdgeOptions","stroke","strokeWidth","panOnDrag","zoomOnScroll","selectNodesOnDrag","_c12","$RefreshReg$"],"sources":["/Users/alexandertraykov/Documents/Documents/synapse-sys/src/components/NodeInput.jsx"],"sourcesContent":["import React, { useState, useCallback, useRef, useEffect } from 'react';\nimport ReactFlow, { \n  Handle, \n  Position,\n  useNodesState,\n  useEdgesState\n} from 'reactflow';\nimport 'reactflow/dist/style.css';\nimport styled from 'styled-components';\nimport { motion, AnimatePresence } from 'framer-motion';\n\nconst jitterKeyframes = `\n  @keyframes jitter {\n    0% { transform: translate(0, 0) rotate(0deg); }\n    25% { transform: translate(1px, 1px) rotate(0.5deg); }\n    50% { transform: translate(-1px, -1px) rotate(-0.5deg); }\n    75% { transform: translate(-1px, 1px) rotate(0.5deg); }\n    100% { transform: translate(1px, -1px) rotate(-0.5deg); }\n  }\n`;\n\nconst CustomNode = styled(motion.div)`\n  ${jitterKeyframes}\n  background: ${props => props.theme.terminal.bg};\n  border: 2px solid ${props => props.theme.terminal.border};\n  padding: 12px;\n  min-width: 300px;\n  position: relative;\n  cursor: ${props => props.isDragging ? 'grabbing' : 'grab'};\n  z-index: 1000;\n`;\n\nconst EditModeContent = styled(motion.div)`\n  width: 100%;\n`;\n\nconst ViewModeActions = styled(motion.div)`\n  position: absolute;\n  top: 12px;\n  right: 12px;\n  display: flex;\n  gap: 12px;\n  opacity: 0;\n\n  i {\n    font-size: 16px;\n    color: #0EF928;\n    cursor: pointer;\n    \n    &.hn-times {\n      color: #ff0000;\n    }\n\n    &.hn-pencil {\n      margin-right: 4px;\n    }\n  }\n`;\n\nconst CustomHandle = styled(Handle)`\n  width: 8px;\n  height: 8px;\n  background: ${props => props.theme.terminal.text};\n  border: 2px solid ${props => props.theme.terminal.border};\n  opacity: 0;\n  transition: all 0.2s;\n  position: absolute;\n\n  &.top {\n    top: -24px;\n    left: 50%;\n    transform: translateX(-50%);\n  }\n  &.right {\n    right: -24px;\n    top: 50%;\n    transform: translateY(-50%);\n  }\n  &.bottom {\n    bottom: -24px;\n    left: 50%;\n    transform: translateX(-50%);\n  }\n  &.left {\n    left: -24px;\n    top: 50%;\n    transform: translateY(-50%);\n  }\n\n  &:hover {\n    background: #0EF928;\n    transform: scale(1.2);\n  }\n`;\n\nconst InputWrapper = styled.div``;\n\nconst Input = styled.input`\n  background: none;\n  border: none;\n  border-bottom: 2px solid ${props => props.theme.terminal.text};\n  color: ${props => props.theme.terminal.text};\n  font-family: 'VT323', monospace;\n  font-size: 20px;\n  width: 100%;\n  padding: 4px 4px 6px 4px;\n  \n  &:focus {\n    outline: none;\n    border-bottom-color: #0EF928;\n  }\n\n  &::placeholder {\n    color: ${props => props.theme.terminal.text}80;\n  }\n`;\n\nconst ActionBar = styled.div`\n  display: flex;\n  align-items: center;\n  margin-top: 8px;\n`;\n\nconst ActionGroup = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  width: 100%;\n`;\n\nconst ActionButton = styled.button`\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 4px;\n  opacity: ${props => props.active ? '1' : '0.7'};\n  transition: all 0.2s;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 24px;\n\n  &:hover {\n    opacity: 1;\n    transform: scale(1.1);\n  }\n\n  i {\n    font-size: 20px;\n    color: ${props => props.theme.terminal.text};\n  }\n`;\n\nconst Tooltip = styled.div`\n  position: absolute;\n  bottom: -24px;\n  left: 50%;\n  transform: translateX(-50%);\n  background: #000000;\n  border: 2px solid #0EF928;\n  padding: 4px 8px;\n  font-size: 12px;\n  color: #0EF928;\n  white-space: nowrap;\n  pointer-events: none;\n  opacity: 0;\n  transition: opacity 0.2s;\n  font-family: 'VT323', monospace;\n  z-index: 1001;\n\n  ${ActionButton}:hover & {\n    opacity: 1;\n  }\n`;\n\n// Custom Node Component\nconst CustomNodeComponent = ({ data }) => {\n  const [isEditing, setIsEditing] = useState(true);\n  const [inputValue, setInputValue] = useState(data.content || '');\n  const [isDragging, setIsDragging] = useState(false);\n  const [hoveredConnector, setHoveredConnector] = useState(null);\n  const [inputType, setInputType] = useState('text');\n  const nodeRef = useRef(null);\n\n  // Add drag handlers\n  const onDragStart = () => setIsDragging(true);\n  const onDragStop = () => setIsDragging(false);\n\n  // Update hover detection with larger area\n  const handleMouseMove = useCallback((e) => {\n    if (isEditing) return;\n    \n    const rect = nodeRef.current?.getBoundingClientRect();\n    if (!rect) return;\n\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    const padding = 60; // Increased detection area\n\n    if (y < 0 && Math.abs(x - rect.width/2) < padding) {\n      setHoveredConnector('top');\n    } else if (x > rect.width && Math.abs(y - rect.height/2) < padding) {\n      setHoveredConnector('right');\n    } else if (y > rect.height && Math.abs(x - rect.width/2) < padding) {\n      setHoveredConnector('bottom');\n    } else if (x < 0 && Math.abs(y - rect.height/2) < padding) {\n      setHoveredConnector('left');\n    } else {\n      setHoveredConnector(null);\n    }\n  }, [isEditing]);\n\n  // Update click outside handler\n  useEffect(() => {\n    const handleClickOutside = (e) => {\n      if (nodeRef.current && !nodeRef.current.contains(e.target)) {\n        if (inputValue.trim()) {\n          setIsEditing(false); // Save on click outside if there's content\n        } else {\n          data.onRemove?.(); // Remove if empty\n        }\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, [inputValue, data.onRemove]);\n\n  const handleInputChange = (e) => {\n    setInputValue(e.target.value);\n    data.onChange?.(e.target.value);\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey && inputValue.trim()) {\n      e.preventDefault();\n      setIsEditing(false);\n    }\n    if (e.key === 'Escape') {\n      if (inputValue.trim()) {\n        setIsEditing(false);\n      }\n    }\n  };\n\n  const handleTypeChange = (type) => {\n    setInputType(type);\n  };\n\n  const handleInputBlur = (e) => {\n    if (inputValue.trim()) {\n      setIsEditing(false); // Save on blur if there's content\n    }\n  };\n\n  // When local editing state changes, update parent\n  useEffect(() => {\n    data.setIsEditing?.(isEditing);\n  }, [isEditing, data.setIsEditing]);\n\n  // Update isDragging when it changes in data\n  useEffect(() => {\n    setIsDragging(data.isDragging || false);\n  }, [data.isDragging]);\n\n  return (\n    <CustomNode\n      ref={nodeRef}\n      initial={{ scale: 1 }}\n      animate={{ \n        scale: isDragging ? 1.05 : 1,\n        filter: isDragging \n          ? 'drop-shadow(16px 16px 0px #000000) drop-shadow(24px 24px 0px #05FD11)'\n          : 'drop-shadow(0px 0px 0px #000000) drop-shadow(0px 0px 0px #05FD11)',\n        transition: { duration: 0.2, ease: \"easeOut\" }\n      }}\n      whileHover={{ \n        scale: isDragging ? 1.05 : 1.02,\n        filter: 'drop-shadow(4px 4px 0px #000000) drop-shadow(8px 8px 0px #05FD11)',\n        transition: { \n          duration: 0.2,\n          filter: { duration: 0.3 }\n        }\n      }}\n      style={{\n        animation: isDragging ? 'jitter 0.3s infinite' : 'none'\n      }}\n      onMouseMove={handleMouseMove}\n      onMouseLeave={() => setHoveredConnector(null)}\n      isDragging={isDragging}\n      onDragStart={onDragStart}\n      onDragStop={onDragStop}\n    >\n      <AnimatePresence mode=\"wait\">\n        {isEditing ? (\n          <EditModeContent\n            key=\"edit\"\n            initial={{ opacity: 0, y: 5 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0 }}\n            transition={{ duration: 0.1 }}\n          >\n            <InputWrapper>\n              <Input \n                autoFocus\n                value={inputValue}\n                onChange={handleInputChange}\n                onKeyDown={handleKeyDown}\n                onBlur={handleInputBlur}\n                placeholder=\"Type your note...\"\n              />\n            </InputWrapper>\n            <ActionBar>\n              <ActionGroup>\n                <ActionButton \n                  title=\"Upload Document\" \n                  active={inputType === 'document'}\n                  onClick={() => handleTypeChange('document')}\n                >\n                  <i className=\"hn hn-file-import\"></i>\n                  <Tooltip>upload file</Tooltip>\n                </ActionButton>\n                <ActionButton \n                  title=\"Upload Image\" \n                  active={inputType === 'image'}\n                  onClick={() => handleTypeChange('image')}\n                >\n                  <i className=\"hn hn-image\"></i>\n                  <Tooltip>upload image</Tooltip>\n                </ActionButton>\n                <ActionButton \n                  title=\"External Link\" \n                  active={inputType === 'link'}\n                  onClick={() => handleTypeChange('link')}\n                >\n                  <i className=\"hn hn-external-link\"></i>\n                  <Tooltip>external link</Tooltip>\n                </ActionButton>\n                <ActionButton \n                  title=\"Save\" \n                  onClick={() => setIsEditing(false)}\n                  style={{ marginLeft: 'auto' }}\n                >\n                  <i className=\"hn hn-check\"></i>\n                  <Tooltip>save (enter)</Tooltip>\n                </ActionButton>\n                <ActionButton \n                  title=\"Cancel\" \n                  onClick={() => data.onRemove?.()}\n                >\n                  <i className=\"hn hn-times\"></i>\n                  <Tooltip>cancel (esc)</Tooltip>\n                </ActionButton>\n              </ActionGroup>\n            </ActionBar>\n          </EditModeContent>\n        ) : (\n          <motion.div\n            key=\"view\"\n            initial={{ opacity: 0, y: -5 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0 }}\n            transition={{ duration: 0.1 }}\n            whileHover=\"hover\"\n          >\n            <div className=\"node-content\">{inputValue}</div>\n            <ViewModeActions\n              variants={{\n                hover: { \n                  opacity: 1,\n                  transition: { duration: 0.1 }\n                }\n              }}\n            >\n              <i \n                className=\"hn hn-pencil\"\n                onClick={() => setIsEditing(true)}\n              />\n              <i \n                className=\"hn hn-times\"\n                onClick={() => data.onRemove?.()}\n              />\n            </ViewModeActions>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {!isEditing && (\n        <>\n          <CustomHandle \n            type=\"target\" \n            position={Position.Top} \n            className=\"top\"\n            style={{ opacity: hoveredConnector === 'top' ? 1 : 0 }}\n          />\n          <CustomHandle \n            type=\"target\" \n            position={Position.Left}\n            className=\"left\" \n            style={{ opacity: hoveredConnector === 'left' ? 1 : 0 }}\n          />\n          <CustomHandle \n            type=\"source\" \n            position={Position.Right}\n            className=\"right\" \n            style={{ opacity: hoveredConnector === 'right' ? 1 : 0 }}\n          />\n          <CustomHandle \n            type=\"source\" \n            position={Position.Bottom}\n            className=\"bottom\" \n            style={{ opacity: hoveredConnector === 'bottom' ? 1 : 0 }}\n          />\n        </>\n      )}\n    </CustomNode>\n  );\n};\n\nconst nodeTypes = {\n  custom: CustomNodeComponent,\n};\n\nconst NodeInput = ({ position, onComplete }) => {\n  const [nodes, setNodes, onNodesChange] = useNodesState([]);\n  const [edges, setEdges, onEdgesChange] = useEdgesState([]);\n  const [isEditing, setIsEditing] = useState(true);\n\n  const onConnect = useCallback((params) => {\n    setEdges((eds) => [...eds, { ...params, animated: true }]);\n  }, [setEdges]);\n\n  React.useEffect(() => {\n    const newNode = {\n      id: '1',\n      type: 'custom',\n      position,\n      draggable: !isEditing,\n      data: { \n        onChange: (value) => {\n          setNodes(nds => \n            nds.map(n => n.id === '1' ? { ...n, data: { ...n.data, content: value } } : n)\n          );\n        },\n        onRemove: () => onComplete(null),\n        setIsEditing\n      }\n    };\n    setNodes([newNode]);\n  }, [position, isEditing]);\n\n  return (\n    <ReactFlow\n      nodes={nodes}\n      edges={edges}\n      onNodesChange={onNodesChange}\n      onEdgesChange={onEdgesChange}\n      onConnect={onConnect}\n      nodeTypes={nodeTypes}\n      onNodeDragStart={() => {\n        const node = nodes[0];\n        setNodes([{ \n          ...node, \n          data: { \n            ...node.data, \n            isDragging: true \n          }\n        }]);\n      }}\n      onNodeDragStop={() => {\n        const node = nodes[0];\n        setNodes([{ \n          ...node, \n          data: { \n            ...node.data, \n            isDragging: false \n          }\n        }]);\n      }}\n      defaultEdgeOptions={{\n        style: { stroke: '#0EF928', strokeWidth: 2 },\n        type: 'smoothstep',\n        animated: true\n      }}\n      panOnDrag={!isEditing}\n      zoomOnScroll={!isEditing}\n      selectNodesOnDrag={false}\n    />\n  );\n};\n\nexport default NodeInput;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}